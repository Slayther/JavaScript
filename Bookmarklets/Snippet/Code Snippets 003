function GetStyleClass(className) {
	for (var i = 0; i < document.styleSheets.length; i++) {
		var styleSheet = document.styleSheets[i]

		var rules = styleSheet.cssRules || styleSheet.rules
		
		if (rules != undefined) {
			for (var j = 0; j < rules.length; j++) {
				var rule = rules[j]

				if (rule.selectorText === className) {
					return(rule.style)
				}
			}
		}
	}
	
	return 0;
}

function FindAncestor (elem, cls) {
    while ((elem = elem.parentElement) && !elem.classList.contains(cls));
    return elem;
}

function SetupAnchorStyles() {
	var anchorStyleSheet = document.createElement('style');
	anchorStyleSheet.type = "text/css";
	anchorStyleSheet.innerHTML = "a {}";

	document.head.appendChild(anchorStyleSheet);
	
	GetStyleClass('a').pointerEvents = "none";
}

function SetupVideoButtons() {
	var bttColor = "rgba(0, 128, 0, 0.3)";
	var videoButtonList = document.getElementsByClassName('yt-lockup-video');
	
	for (var i = 0; videoButtonList[i]; i++) {
		var bttChildren = Array.prototype.slice.call(videoButtonList[i].getElementsByClassName('yt-ui-ellipsis yt-ui-ellipsis-2'));
		
		bttChildren.forEach(function(elem, ind, arr) {
			arr[ind].style.backgroundColor = "transparent";
		});
		
		videoButtonList[i].onmouseenter = function(ev) {
			var videoLink = ev.target.getElementsByClassName('yt-uix-sessionlink')[0].href;
			
			if (selectedVideos.indexOf(videoLink) == -1) {
				ev.target.style.backgroundColor = bttColor;
				ev.target.style.outline = "3px solid " + bttColor;
				
				ev.target.onmouseup = function(ev) {
					var videoElem = FindAncestor(ev.target, 'yt-lockup-video');
					var videoLink = videoElem.getElementsByClassName('yt-uix-sessionlink')[0].href;
					
					if (selectedVideos.indexOf(videoLink) == -1) {
						selectedVideos.push(videoLink);
						
						if (!(videoLink in videoLinkToInfo)) {
							console.log()
							
							videoLinkToInfo[videoLink] = {
								'element': FindAncestor(ev.target, 'yt-lockup-video'),
								
							};
						}
					} else {
						selectedVideos.splice(selectedVideos.indexOf(videoLink), 1);
					}
				}
			}
		}
		
		videoButtonList[i].onmouseleave = function(ev) {
			var videoLink = ev.target.getElementsByClassName('yt-uix-sessionlink')[0].href;
			
			if (selectedVideos.indexOf(videoLink) == -1) {
				ev.target.style.backgroundColor = "";
				ev.target.style.outline = "";
			}
		}
	}
}

function CreateElement(elemType, parentElem, styleDict, elemText) {
	var newElem = document.createElement(elemType);
	parentElem.appendChild(newElem);
	
	SetStyle(newElem, styleDict);
	
	newElem.innerHTML = elemText;
	
	return newElem;
}

function SetStyle(elem, propertyObject) {
	for (var property in propertyObject) {
		elem.style[property] = propertyObject[property];
	}
}

function SetupStatusArea() {
	var statusDiv = CreateElement('div', document.body, {
		'position'        : 'fixed',
		'top'             : '95%',
		'width'           : '100%',
		'text-align'      : 'center',
		'height'          : '5%',
		'background-color': 'rgb(160, 197, 218)',
		'outline'         : '2px solid #222B77'
	}, '');
	
	var statusTextDiv = CreateElement('div', statusDiv, {
		'top:'       : '5%',
		'position'   : 'relative',
		'color'      : 'white',
		'font-size'  : '36px'
	}, 'Odaberite sva videa koja želite skinuti.');
	
	var nextButton = CreateElement('button', statusDiv, {
		'background-color': '#4CAF50',
		'border'          : 'none',
		'color'           : 'white',
		'padding'         : '2px 32px',
		'text-align'      : 'center',
		'text-decoration' : 'none',
		'font-size'       : '16px',
		'margin'          : '4px 2px',
		'cursor'          : 'pointer',
		'border-radius'   : '12px',
		'position'        : 'absolute',
		'top'             : '8px',
		'left'            : '89%'
	}, 'Dalje');
	
	nextButton.onmouseup = function(ev) {
		nextButton.innerHTML = "Učitavam..."
		nextButton.style.padding = '2px 12px';
		LoadVideoPage();
	}
}

function LoadVideoPage() {
	document.head.innerHTML = '';
	document.body.innerHTML = '';
	
	
}

var videoLinkToInfo = {};

var selectedVideos = [];

SetupAnchorStyles();
SetupVideoButtons();
SetupStatusArea();

---

var s = document.createElement('script');
s.type = "text/javascript";
s.src = "https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js";
document.head.appendChild(s);

var id = 'VA770wpLX-Q';
var url = 'https://www.youtube.com/watch?v=' + id;

$.getJSON('https://noembed.com/embed',
    {format: 'json', url: url}, function (data) {
    alert(data.title);
});
